environment: production

application:
  api:
    env:
      WTFProviderConfigurationFile: /etc/cexiolabs/cryptopay.api/legacy-cpservice-config/WTF-prod.json
    replicas: 1
  dashboardobsolete:
    replicas: 1
  identity:
    replicas: 1
  processing:
    args:
      [
        "--config-file=/etc/cexiolabs/cryptopay.processing/service.config",
        "--config-toml-file=/etc/cexiolabs/cryptopay.processing/service.toml",
        "--config-toml-file=/etc/cexiolabs/cryptopay.processing/service-setup.toml",
        "--config-toml-file=/etc/cexiolabs/cryptopay.processing/service-setup-dach.toml",
        "--config-toml-file=/etc/cexiolabs/cryptopay.processing/service-setup-goldenpay.toml",
        "--config-toml-file=/etc/cexiolabs/cryptopay.processing/service-production.toml",
        "--config-secrets-dir=/etc/cexiolabs/cryptopay/secrets",
        "--config-secrets-dir=/etc/cexiolabs/cryptopay/secrets-setup",
        "--config-env"
      ]
    replicas: 1

ingress:
  API:
    domain: api.cryptopay.band
    certSecretName: ingress-gate-api-dashboard
    nginxConfigurationSnippet: |
      rewrite ^/$ /v3/time redirect;
    paths:
      "/v2/":
        backendServiceName: processing
        backendServicePort: 8080
      "/v3/":
        backendServiceName: api
        backendServicePort: 8443
  Callbacks:
    domain: callback.prodcryptopay.kube
    certSecretName: callback
    paths:
      "/v2/callback/cryptoproviders/pss-provider-wtf2/":
        backendServiceName: processing
        backendServicePort: 8084
      "/ws/":
        backendServiceName: processing
        backendServicePort: 8086
  DashboardObsolete:
    domain: dashboard.cryptopay.band
    certSecretName: ingress-gate-api-dashboard
    nginxConfigurationSnippet: |
      add_header Last-Modified $date_gmt;
      add_header Cache-Control 'no-store, no-cache, must-revalidate, proxy-revalidate, max-age=0';
      if_modified_since off;
      expires off;
      etag off;
    paths:
      "/":
        backendServiceName: dashboardobsolete
        backendServicePort: 8445
      "/v2/dashboard/":
        backendServiceName: processing
        backendServicePort: 8082
  # Gate:
  #   domain: gate.cryptopay.band
  #   certSecretName: ingress-gate-api-dashboard
  #   nginxConfigurationSnippet: |
  #     add_header Last-Modified $date_gmt;
  #     add_header Cache-Control 'no-store, no-cache, must-revalidate, proxy-revalidate, max-age=0';
  #     if_modified_since off;
  #     expires off;
  #     etag off;
  #   paths:
  #     "/":
  #       backendServiceName: gateuiserve
  #       backendServicePort: 8080
  #     "/v2/gate/":
  #       backendServiceName: processing
  #       backendServicePort: 8085
  #     "/v2/gate-callback/":
  #       backendServiceName: processing
  #       backendServicePort: 8085
  Identity:
    domain: id.cryptopay.band
    certSecretName: ingress-gate-api-dashboard
    paths:
      "/":
        backendServiceName: identity
        backendServicePort: 8443
  MessengerBridge:
    # THIS temporary endpoint just for testing purposes
    domain: messengerbridge-cryptopay.prodcryptopay.kube
    certSecretName: callback
    paths:
      "/":
        backendServiceName: messengerbridge
        backendServicePort: 8443
