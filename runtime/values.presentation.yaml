environment: presentation

docker:
  processing:
    serviceImage: devdocker.infra.kube/cryptopay/cpservice-devel
    tag: latest
    args:
      [
        "--config-file=/etc/cexiolabs/cryptopay.processing/service.config",
        "--config-file=/etc/cexiolabs/cryptopay.processing/gateway.config",
        "--config-secrets-dir=/etc/cexiolabs/cryptopay/secrets",
        "--config-secrets-dir=/etc/cexiolabs/cryptopay/secrets-setup",
        "--config-env",
      ]
    cmdbin: "aggrless"
    debugPort: 9229
  dashboard:
    serviceImage: devdocker.infra.kube/cryptopay/dashboard
    tag: latest

ingress:
  API-Internal:
    type: internal
    domain: api-presentation-cryptopay.dev.kube
    certSecretName: dev
    paths:
      "/":
        backendServiceName: processing
        backendServicePort: 8080
  API-External:
    type: external
    domain: api-testnet.cryptopay.band
    certSecretName: cryptopay-band
    paths:
      "/":
        backendServiceName: processing
        backendServicePort: 8080
  SysAdmin-Internal:
    type: internal
    domain: sysadmin-presentation-cryptopay.dev.kube
    # TODO Add: require client's certificate
    #backendCaSecretName:
    certSecretName: dev
    paths:
      "/":
        backendServiceName: processing
        backendServicePort: 8081
  Dashboard-Internal:
    type: internal
    domain: dashboard-presentation-cryptopay.dev.kube
    certSecretName: dev
    #backendCaSecretName: ca-secret
    backendInsecure: yes
    paths:
      "/":
        backendServiceName: dashboard
        backendServicePort: 8080
  Dashboard-External:
    type: external
    domain: dashboard-testnet.cryptopay.band
    certSecretName: cryptopay-band
    #backendCaSecretName: ca-secret
    backendInsecure: yes
    paths:
      "/":
        backendServiceName: dashboard
        backendServicePort: 8080
  SpecsAndWidgetAndGateway-External:
    type: external
    domain: testnet.cryptopay.band
    certSecretName: cryptopay-band
    paths:
      "/":
        backendServiceName: processing
        backendServicePort: 8083
      "/v2/gateway/api":
        backendServiceName: processing
        backendServicePort: 8080
      "/widget":
        backendServiceName: processing
        backendServicePort: 8086
  SpecsAndWtf2PssCallbacks-Internal:
    type: internal
    domain: presentation-cryptopay.dev.kube
    certSecretName: dev
    paths:
      "/":
        backendServiceName: processing
        backendServicePort: 8083
      "/v2/gateway/api":
        backendServiceName: processing
        backendServicePort: 8080
      "/widget":
        backendServiceName: processing
        backendServicePort: 8086
      "/v2/callback/cryptoproviders/cex/wtf2pss/":
        backendServiceName: processing
        backendServicePort: 8084
